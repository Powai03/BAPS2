<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profil</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100 p-10 flex justify-center items-center min-h-screen">
    
    <div class="container flex mx-auto px-4 py-8 ">
        <div class="boutoncontainer flex flex-col">
            <button id="compte" class="bg-blue-500 text-white px-4 py-2 rounded">Mon compte</button>
            <button id="gestion" class="bg-blue-500 text-white px-4 py-2 rounded">Informations</button>
            <button id="vitrine" class="bg-blue-500 text-white px-4 py-2 rounded">Ma vitrine</button>
            <button id="justificatif" class="bg-blue-500 text-white px-4 py-2 rounded">Mes documents</button>
            <button id="admin" class="bg-blue-500 text-white px-4 py-2 rounded">Admin</button>
        </div>
        <div class="bg-white shadow-md rounded-lg p-6 w-full max-w-2xl">
            <a href="home.html" class="text-blue-500">Retour √† l'accueil</a>
            <h1 class="text-2xl font-bold text-center mb-4">Mon Profil</h1>

            <!-- üìå Section Profil (Affichage) -->
            <div id="profileView">
                <div id="profilContainer">
                    
                    <div id="auto-entrepreneur-info" class="">
                        <!-- Pour une AUTOENTREPRISE -->
                        <p> <span id="nom"></span></p>
                        <p> <span id="prenom"></span></p>
                            <!-- Pour une ENTREPRISE -->
                        <p> <span id="nomEntreprise"></span></p>
                        <div class="logoentreprise w-24 h-24 rounded-full mt-4"></div>
                        <p><strong>Email :</strong> <span id="email"></span></p>
                        <p><strong>T√©l√©phone :</strong> <span id="telephone"></span></p>
                        <p><strong>Adresse :</strong> <span id="adresse"></span></p>
                        <p><strong>Site Web :</strong> <span id="siteWeb"></span></p>
                        <p><strong>Domaine d'activit√© :</strong> <span id="domaineActivite"></span></p>
                        <p><strong>Profession :</strong> <span id="profession"></span></p>
                        <p><strong>SIREN/CESU :</strong> <span id="numero"></span></p>
                        <p><strong>Description :</strong> <span id="description"></span></p>
                    </div>
                    
                </div>
                <!-- üìå Section Formulaire (Modification) -->
                <div id="gestionContainer" class="">
                    <h2 class="text-xl font-semibold mt-4">Modifier le Profil</h2>
                    <form id="updateForm" class="space-y-3">
                        <!-- Pour un AUTOENTREPRENEUR -->
                        <div id="microentrepriseFields">
                            <label class="block">Nom :</label>
                            <input type="text" id="editNom" class="w-full border p-2 rounded">

                            <label class="block">Pr√©nom :</label>
                            <input type="text" id="editPrenom" class="w-full border p-2 rounded">
                        </div>

                        <!-- Pour une ENTREPRISE -->
                        <div id="entrepriseFields" class="hidden">
                            <label class="block">Nom de l'entreprise :</label>
                            <input type="text" id="editNomCommerce" class="w-full border p-2 rounded">
                        </div>
                        <label class="block">Email :</label>
                        <input type="email" id="editEmail" class="w-full border p-2 rounded">
                        <label class="block">Mot de passe :</label>
                        <input type="password" id="editPassword" class="w-full border p-2 rounded">
                        <label class="block">T√©l√©phone :</label>
                        <input type="text" id="editTelephone" class="w-full border p-2 rounded">
                        <label class="block">SiteWeb :</label>
                        <input type="text" id="editSiteWeb" class="w-full border p-2 rounded">
                        <label class="block">Adresse :</label>
                        <input type="text" id="editAdresse" class="w-full border p-2 rounded" placeholder="Adresse">
                        <input type="text" id="editComplementAdresse" class="w-full border p-2 rounded"
                            placeholder="Compl√©ment d'adresse">
                        <input type="text" id="editCodePostal" class="w-full border p-2 rounded"
                            placeholder="Code postal">

                        <button type="submit" class="bg-green-500 text-white px-4 py-2 rounded">Enregistrer les
                            changements*</button>
                        <p>(*Soumis √† la validation d'un administrateur)</p>
                    </form>
                    <h1>Changement de Logo</h1>
                    <form id="uploadForm">
                        <input type="file" id="fileInput" name="file" />
                        <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded">Uploader l'image</button>
                    </form>
                </div>

                <!-- üìå Section Vitrine (Affichage et ajout) -->
                <div id="vitrineContainer" class=" flex flex-col">
                    <h1>Ajouter des photos</h1>
                    <form id="uploadVitrineForm">
                        <input type="file" id="fileInputVitrine" name="file" />
                        <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded">Uploader des
                            images</button>
                    </form>
                    <form id="descriptionForm" class="space-y-3 flex flex-col">
                        <label for="description">Description de votre entreprise</label>
                        <textarea name="description" id="descriptionArea" cols="30" rows="10"></textarea>
                        <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded">Enregistrer</button>
                    </form>

                    <div id="displayImages">
                        <h1>Images de la vitrine</h1>

                    </div>
                </div>

                <!-- üìå Section Mes documents (ajout) -->
                <div class="justificatifContainer">
                    <h1>Justificatif</h1>
                    <form id="identiteForm">
                        <input type="file" id="identiteInput" name="file" />
                        <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded">Uploader le
                            justificatif</button>
                    </form>
                    <form id="numeroForm">
                        <input type="file" id="numeroInput" name="file" />
                        <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded">Uploader le
                            justificatif</button>
                    </form>
                    <h2>Justificatif en cours de validation :</h2>
                    <div id="identiteImage"></div>
                    <div id="numeroImage"></div>
                </div>

                <!-- üìå Section admin (Validation) -->
                <div class="adminContainer">
                    <div class="validation">
                        <h1>Demandes d'inscription</h1>
                    </div>
                    <div class="modificationValidation">
                        <h1>Demandes de modification</h1>
                    </div>
                    <div class="annuaire">
                        <h1>Annuaire des utilisateurs</h1>
                    </div>
                </div>


                <button onclick="logout()"
                    class="mt-4 bg-red-500 text-white px-4 py-2 rounded w-full">D√©connexion</button>
            </div>



            <script>
                const role = localStorage.getItem("role");
                let nom;
                if (role === "ENTREPRISE") {
                    nom = localStorage.getItem("nomEntreprise");
                } else {
                    nom = localStorage.getItem("nom");
                }
                console.log(role);

                function logout() {
                    localStorage.removeItem("token");
                    localStorage.removeItem("userId");
                    window.location.href = "login.html";
                }

                document.addEventListener("DOMContentLoaded", () => {
                    const role = localStorage.getItem("role");

                    // Boutons
                    const compteBtn = document.getElementById("compte");
                    const gestionBtn = document.getElementById("gestion");
                    const vitrineBtn = document.getElementById("vitrine");
                    const justificatifBtn = document.getElementById("justificatif");
                    const adminBtn = document.getElementById("admin");

                    // Containers
                    const profilContainer = document.getElementById("profilContainer");
                    const gestionContainer = document.getElementById("gestionContainer");
                    const vitrineContainer = document.getElementById("vitrineContainer");
                    const justificatifContainer = document.querySelector(".justificatifContainer");
                    const adminContainer = document.querySelector(".adminContainer");

                    // Masquer tous les containers au d√©but
                    function hideAllContainers() {
                        profilContainer.style.display = "none";
                        gestionContainer.style.display = "none";
                        vitrineContainer.style.display = "none";
                        justificatifContainer.style.display = "none";
                        adminContainer.style.display = "none";
                    }

                    // Affichage au clic
                    compteBtn.addEventListener("click", () => {
                        hideAllContainers();
                        profilContainer.style.display = "block";
                    });

                    gestionBtn.addEventListener("click", () => {
                        hideAllContainers();
                        gestionContainer.style.display = "block";
                    });

                    vitrineBtn.addEventListener("click", () => {
                        hideAllContainers();
                        vitrineContainer.style.display = "block";
                    });

                    justificatifBtn.addEventListener("click", () => {
                        hideAllContainers();
                        justificatifContainer.style.display = "block";
                    });

                    adminBtn.addEventListener("click", () => {
                        hideAllContainers();
                        adminContainer.style.display = "block";
                    });
                    hideAllContainers();
                    // Masquer le bouton Admin si l'utilisateur n'est pas admin
                    if (role !== "ADMIN") {
                        adminBtn.style.display = "none";
                    }
                    const etatCreation = localStorage.getItem("etatCreation");
                    
                });

            </script>
            <script src="./js/upload.js"></script>
            <script defer src="./js/uploadVitrine.js"></script>
            <script defer src="./js/profil.js"></script>
            <script defer src="./js/updateProfil.js"></script>
            <script defer src="./js/uploadJustificatif.js"></script>
</body>

</html>